#!/bin/bash

# ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# auto-designerã®tempãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤

TEMP_DIR="./temp"
MAX_AGE_HOURS=24  # 24æ™‚é–“ä»¥ä¸Šå¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤

echo "ðŸ§¹ ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–‹å§‹"
echo "å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: $TEMP_DIR"
echo "å‰Šé™¤å¯¾è±¡: ${MAX_AGE_HOURS}æ™‚é–“ä»¥ä¸Šå¤ã„ãƒ•ã‚¡ã‚¤ãƒ«"

if [ ! -d "$TEMP_DIR" ]; then
    echo "âœ… tempãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†ã€‚"
    exit 0
fi

# å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã¦å‰Šé™¤
find "$TEMP_DIR" -type f -mtime +$((MAX_AGE_HOURS/24)) -name "*.pdf" -o -name "*.html" | while read file; do
    echo "ðŸ—‘ï¸  å‰Šé™¤: $file"
    rm -f "$file"
done

echo "âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†"

# ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’è¡¨ç¤º
echo ""
echo "ðŸ“‹ ç¾åœ¨ã®tempãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…å®¹:"
if [ -z "$(ls -A $TEMP_DIR 2>/dev/null)" ]; then
    echo "   (ç©º)"
else
    ls -la "$TEMP_DIR"
fi 